## mellanox交换机常用配置

### 查看命令

```
net show version
```

查看交换机当前信息，以及交换机系统版本

```
net show interface all
```

显示所有接口的详细信息



### 配置命令

```
cl-license
```

输入许可证

```
cl-license status: 显示当前许可证的状态，包括许可证类型、有效期等信息。
cl-license show: 显示当前安装的许可证的详细信息，如许可证版本、序列号等。
cl-license activate: 激活新的许可证，通过提供许可证密钥或文件来激活许可证。
cl-license deactivate: 停用当前激活的许可证。
cl-license install: 安装新的许可证文件。
cl-license uninstall: 卸载当前安装的许可证文件
```



```
net add interface eth0 ip address 192.0.2.42/24
net add interface eth0 ip gateway 192.0.2.1
```

Cumulus Linux 交换机始终提供至少一个称为 eth0 的专用以太网管理端口。该接口专门供带外管理使用。管理接口默认使用 DHCPv4 进行寻址。



```
net add interface swp1-32
```

这个命令的作用是将指定的接口添加到交换机的配置中，以便进行进一步的配置和管理。通过添加这些接口，您可以为每个接口分配特定的功能和属性，例如 VLAN 配置、链路聚合（LACP）、速度和双工模式设置等。

在执行这个命令之后，这些接口将被添加到交换机的配置中，并且可以在后续的配置命令中引用它们



```
net pending
```

当您对交换机的配置进行修改并使用 `net add` 或其他配置命令时，这些更改不会立即生效，而是被保存在一个待确认（pending）的状态中。`net pending` 命令可以用来查看当前处于待确认状态的配置更改。

通过执行 `net pending` 命令，您可以获取有关待确认配置更改的详细信息，包括更改的类型、接口、参数等。这可以帮助您检查和确认正在进行的配置更改，以确保其准确性和一致性。

一旦您确认并应用了待确认的配置更改，它们将立即生效并成为交换机的当前配置。如果您不想应用待确认的更改，可以使用 `net discard` 命令来取消待确认的配置更改。

请注意，在执行 `net pending` 命令之前，请确保您已经完成了对交换机的所有配置更改，并且准备好将这些更改应用到交换机上。



```
net commit
```

当您对交换机的配置进行修改后，例如添加或删除接口、配置 VLAN、调整链路聚合等，这些更改只是暂时保存在交换机的配置中，并未立即生效。要使这些更改生效并永久保存，您需要使用 `net commit` 命令。

执行 `net commit` 命令后，交换机将验证您的配置更改，如果配置正确且没有冲突，它将应用这些更改并将其保存为交换机的永久配置。这样，您的配置更改将在交换机重启后保持生效。



```
net add bridge bridge ports swp1-32
```

在网络中，网桥是一种设备或软件实体，用于连接两个或多个以太网段，使它们可以进行通信。通过将接口添加到网桥中，这些接口可以通过网桥进行通信，实现不同以太网段之间的数据转发。

执行 `net add bridge bridge ports swp1-32` 命令后，指定的接口（`swp1` 到 `swp32`）将被添加到指定的网桥中。这样，这些接口之间的数据流量将通过网桥进行转发和交换。

请注意，网桥的配置可能还需要其他的设置和参数，例如网桥的名称、STP（Spanning Tree Protocol）设置、VLAN 配置等。具体配置取决于您的网络需求和环境。

在执行这个命令之前，确保您已经了解网桥的配置和用途，并对要添加到网桥的接口进行了正确的选择。



```
nv config save
```

如果您运行 NVUE 命令来配置交换机，请`nv config save`在重新启动之前运行该命令，以将应用的配置保存到启动配置，以便更改在重新启动后仍然存在。

当您对交换机的配置进行修改并使用 `net add` 或其他配置命令时，这些更改不会立即生效，而是被保存在一个待确认（pending）的状态中。`net pending` 命令可以用来查看当前处于待确认状态的配置更改。

通过执行 `net pending` 命令，您可以获取有关待确认配置更改的详细信息，包括更改的类型、接口、参数等。这可以帮助您检查和确认正在进行的配置更改，以确保其准确性和一致性。

一旦您确认并应用了待确认的配置更改，它们将立即生效并成为交换机的当前配置。如果您不想应用待确认的更改，可以使用 `net discard` 命令来取消待确认的配置更改。

请注意，在执行 `net pending` 命令之前，请确保您已经完成了对交换机的所有配置更改，并且准备好将这些更改应用到交换机上。



